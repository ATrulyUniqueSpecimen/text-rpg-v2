{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/nsnih/text-rpg-v2/app/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { Story } from \"inkjs\";\r\n\r\nconst SAVE_KEYS = [\"ink_save_1\", \"ink_save_2\", \"ink_save_3\"] as const;\r\nconst ACTIVE_SLOT_KEY = \"ink_active_slot\";\r\nconst MAX_HISTORY_LINES = 100;\r\n\r\ntype ChoiceView = { index: number; text: string };\r\n\r\nexport default function Page() {\r\n  type Mode = \"menu\" | \"stats\" | \"game\";\r\n\r\n  const avatarY = 5;\r\n\r\n  const [uiCoins, setUiCoins] = useState(0);\r\n  const [uiEquippedWeapon, setUiEquippedWeapon] = useState(\"none\");\r\n  const [uiEquippedArmor, setUiEquippedArmor] = useState(\"none\");\r\n  const [uiEquippedOutfit, setUiEquippedOutfit] = useState(\"none\");\r\n  const [uiEquippedHat, setUiEquippedHat] = useState(\"none\");\r\n  const [uiEquippedNecklace, setUiEquippedNecklace] = useState(\"none\");\r\n  const [uiEquippedRing, setUiEquippedRing] = useState(\"none\");\r\n\r\n  const [uiInventory, setUiInventory] = useState<string[]>([]);\r\n  const [uiStats, setUiStats] = useState<{\r\n    STR: { base: number; total: number };\r\n    CHA: { base: number; total: number };\r\n    WIT: { base: number; total: number };\r\n  }>({\r\n    STR: { base: 0, total: 0 },\r\n    CHA: { base: 0, total: 0 },\r\n    WIT: { base: 0, total: 0 },\r\n  });\r\n\r\n  const [mode, setMode] = useState<Mode>(\"menu\");\r\n  const [pendingSlot, setPendingSlot] = useState<number | null>(null);\r\n\r\n  const [stats, setStats] = useState({ STR_BASE: 5, CHA_BASE: 5, WIT_BASE: 5 });\r\n  const STAT_POOL = 15; // example, change as you like\r\n\r\n  const [storyJson, setStoryJson] = useState<any | null>(null);\r\n  const [story, setStory] = useState<Story | null>(null);\r\n\r\n  const [lines, setLines] = useState<string[]>([]);\r\n  const [choices, setChoices] = useState<ChoiceView[]>([]);\r\n\r\n  const [activeSlot, setActiveSlot] = useState<number>(0);\r\n  const [slotHasSave, setSlotHasSave] = useState<boolean[]>([false, false, false]);\r\n\r\n  function readSlotPresence(): boolean[] {\r\n    return SAVE_KEYS.map(k => !!localStorage.getItem(k));\r\n  }\r\n\r\n  function refreshSlotPresence() {\r\n    setSlotHasSave(readSlotPresence());\r\n  }\r\n\r\n  function saveToSlot(s: Story, slot: number, currentLines: string[]) {\r\n    localStorage.setItem(SAVE_KEYS[slot], s.state.toJson());\r\n    localStorage.setItem(SAVE_KEYS[slot] + \"_transcript\", JSON.stringify(currentLines));\r\n    localStorage.setItem(ACTIVE_SLOT_KEY, String(slot));\r\n    refreshSlotPresence();\r\n  }\r\n\r\n  function loadFromSlot(s: Story, slot: number): { ok: boolean; loadedLines: string[] } {\r\n    const saved = localStorage.getItem(SAVE_KEYS[slot]);\r\n    const savedTranscript = localStorage.getItem(SAVE_KEYS[slot] + \"_transcript\");\r\n\r\n    if (!saved) return { ok: false, loadedLines: [] };\r\n\r\n    try {\r\n      s.state.LoadJson(saved);\r\n      const lines = savedTranscript ? JSON.parse(savedTranscript) : [];\r\n      // Safety clamp on load\r\n      if (lines.length > MAX_HISTORY_LINES) {\r\n        lines.splice(0, lines.length - MAX_HISTORY_LINES);\r\n      }\r\n      return { ok: true, loadedLines: lines };\r\n    } catch {\r\n      localStorage.removeItem(SAVE_KEYS[slot]);\r\n      localStorage.removeItem(SAVE_KEYS[slot] + \"_transcript\");\r\n      refreshSlotPresence();\r\n      return { ok: false, loadedLines: [] };\r\n    }\r\n  }\r\n\r\n  function clearSlot(slot: number) {\r\n    localStorage.removeItem(SAVE_KEYS[slot]);\r\n    localStorage.removeItem(SAVE_KEYS[slot] + \"_transcript\");\r\n    refreshSlotPresence();\r\n  }\r\n\r\n  function continueStory(s: Story): { newLines: string[]; newChoices: ChoiceView[] } {\r\n    const newLines: string[] = [];\r\n    while (s.canContinue) {\r\n      const t = (s as any).Continue().trim();\r\n      if (t) newLines.push(t);\r\n    }\r\n    const newChoices = s.currentChoices.map(c => ({ index: c.index, text: c.text }));\r\n    return { newLines, newChoices };\r\n  }\r\n\r\n  function startFreshInSlot(slot: number, chosenStats: { STR_BASE: number; CHA_BASE: number; WIT_BASE: number }) {\r\n    if (!storyJson) return;\r\n\r\n    const s = new Story(storyJson);\r\n\r\n    // Set Ink globals before any Continue()\r\n    s.variablesState[\"STR_BASE\"] = chosenStats.STR_BASE;\r\n    s.variablesState[\"CHA_BASE\"] = chosenStats.CHA_BASE;\r\n    s.variablesState[\"WIT_BASE\"] = chosenStats.WIT_BASE;\r\n\r\n    setStory(s);\r\n    setActiveSlot(slot);\r\n\r\n    setStory(s);\r\n    setActiveSlot(slot);\r\n\r\n    // Initial run\r\n    const { newLines, newChoices } = continueStory(s);\r\n\r\n    setLines(newLines);\r\n    setChoices(newChoices);\r\n    syncSidebar(s);\r\n\r\n    saveToSlot(s, slot, newLines);\r\n\r\n    setMode(\"game\");\r\n  }\r\n\r\n  function StatEditor({\r\n    stats,\r\n    setStats,\r\n    pool,\r\n  }: {\r\n    stats: { STR_BASE: number; CHA_BASE: number; WIT_BASE: number };\r\n    setStats: (s: { STR_BASE: number; CHA_BASE: number; WIT_BASE: number }) => void;\r\n    pool: number;\r\n  }) {\r\n    const total = stats.STR_BASE + stats.CHA_BASE + stats.WIT_BASE;\r\n    const remaining = pool - total;\r\n\r\n    function setOne(k: \"STR_BASE\" | \"CHA_BASE\" | \"WIT_BASE\", v: number) {\r\n      const clamped = Math.max(0, Math.min(20, v));\r\n      setStats({ ...stats, [k]: clamped });\r\n    }\r\n\r\n    const LABELS: Record<string, string> = {\r\n      STR_BASE: \"STR\",\r\n      CHA_BASE: \"CHA\",\r\n      WIT_BASE: \"INT\",\r\n    };\r\n\r\n    return (\r\n      <div style={{ display: \"grid\", gap: 12, marginTop: 16 }}>\r\n        <div style={{ opacity: 0.85 }}>Remaining: {remaining}</div>\r\n\r\n        {([\"STR_BASE\", \"CHA_BASE\", \"WIT_BASE\"] as const).map(k => (\r\n          <div key={k} style={{ display: \"flex\", gap: 10, alignItems: \"center\" }}>\r\n            <div style={{ width: 50, fontWeight: 700 }}>{LABELS[k]}</div>\r\n            <button onClick={() => setOne(k, stats[k] - 1)} disabled={stats[k] <= 0}>-</button>\r\n            <div style={{ width: 30, textAlign: \"center\" }}>{stats[k]}</div>\r\n            <button\r\n              onClick={() => setOne(k, stats[k] + 1)}\r\n              disabled={remaining <= 0}\r\n            >\r\n              +\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  function beginNewGame(slot: number) {\r\n    setPendingSlot(slot);\r\n    setStats({ STR_BASE: 5, CHA_BASE: 5, WIT_BASE: 5 }); // defaults\r\n    setMode(\"stats\");\r\n  }\r\n\r\n  function confirmStats() {\r\n    if (pendingSlot === null) return;\r\n    startFreshInSlot(pendingSlot, stats);\r\n    setPendingSlot(null);\r\n  }\r\n\r\n  function loadSlot(slot: number) {\r\n    if (!storyJson) return;\r\n\r\n    const s = new Story(storyJson);\r\n    const { ok, loadedLines } = loadFromSlot(s, slot);\r\n\r\n    if (!ok) {\r\n      // If there is no save or it is corrupt, do nothing.\r\n      return;\r\n    }\r\n\r\n    setStory(s);\r\n    setActiveSlot(slot);\r\n\r\n    // Resume (check if there is more content, though usually save is at choice)\r\n    const { newLines, newChoices } = continueStory(s);\r\n\r\n    const combinedLines = [...loadedLines, ...newLines];\r\n    setLines(combinedLines);\r\n    setChoices(newChoices);\r\n    syncSidebar(s);\r\n\r\n    // Normalize by resaving immediately.\r\n    saveToSlot(s, slot, combinedLines);\r\n\r\n    setMode(\"game\");\r\n  }\r\n\r\n  function choose(i: number) {\r\n    if (!story) return;\r\n    story.ChooseChoiceIndex(i);\r\n\r\n    const { newLines, newChoices } = continueStory(story);\r\n\r\n    setLines(prev => {\r\n      const updated = [...prev, ...newLines];\r\n      // Limit history to prevent infinite storage growth\r\n      if (updated.length > MAX_HISTORY_LINES) {\r\n        updated.splice(0, updated.length - MAX_HISTORY_LINES);\r\n      }\r\n\r\n      saveToSlot(story, activeSlot, updated);\r\n      return updated;\r\n    });\r\n    setChoices(newChoices);\r\n    syncSidebar(story);\r\n  }\r\n\r\n  function backToMenu() {\r\n    setMode(\"menu\");\r\n    setStory(null);\r\n    setLines([]);\r\n    setChoices([]);\r\n    refreshSlotPresence();\r\n  }\r\n\r\n  function asNumber(v: any, fallback = 0) {\r\n    if (typeof v === \"number\") return v;\r\n    const n = parseInt(String(v ?? \"\"), 10);\r\n    return Number.isFinite(n) ? n : fallback;\r\n  }\r\n\r\n  function asString(v: any, fallback = \"none\") {\r\n    if (typeof v === \"string\") return v;\r\n    if (v == null) return fallback;\r\n\r\n    // inkjs list items / ink lists stringify nicely (e.g. \"ITEMS.rusty_sword\")\r\n    if (typeof v.toString === \"function\") {\r\n      const s = v.toString();\r\n      return s ? s : fallback;\r\n    }\r\n\r\n    return String(v);\r\n  }\r\n\r\n  function normalizeItemId(raw: string) {\r\n    // \"ITEMS.rusty_sword\" -> \"rusty_sword\"\r\n    const s = raw.trim();\r\n    const dot = s.lastIndexOf(\".\");\r\n    return dot >= 0 ? s.slice(dot + 1) : s;\r\n  }\r\n\r\n  function inkListToIds(v: any): string[] {\r\n    if (v == null) return [];\r\n\r\n    // inkjs InkList stringifies to comma-separated items.\r\n    // Example: \"ITEMS.rusty_sword, ITEMS.old_sack\"\r\n    const s: string = typeof v === \"string\" ? v : (typeof v.toString === \"function\" ? v.toString() : \"\");\r\n    if (!s) return [];\r\n\r\n    return s\r\n      .split(\",\")\r\n      .map((t: string) => normalizeItemId(t))\r\n      .filter(Boolean)\r\n      .filter((id: string) => id !== \"none\"); // donâ€™t show \"none\" in inventory\r\n  }\r\n\r\n  function syncSidebar(s: Story) {\r\n    setUiCoins(asNumber((s as any).variablesState[\"coins\"], 0));\r\n\r\n    const eqWraw = asString((s as any).variablesState[\"eq_weapon\"], \"none\");\r\n    const eqAraw = asString((s as any).variablesState[\"eq_armor\"], \"none\");\r\n    const eqOraw = asString((s as any).variablesState[\"eq_outfit\"], \"none\");\r\n    const eqHraw = asString((s as any).variablesState[\"eq_hat\"], \"none\");\r\n    const eqNraw = asString((s as any).variablesState[\"eq_necklace\"], \"none\");\r\n    const eqRraw = asString((s as any).variablesState[\"eq_ring\"], \"none\");\r\n\r\n    // normalize \"ITEMS.rusty_sword\" -> \"rusty_sword\"\r\n    setUiEquippedWeapon(normalizeItemId(eqWraw));\r\n    setUiEquippedArmor(normalizeItemId(eqAraw));\r\n    setUiEquippedOutfit(normalizeItemId(eqOraw));\r\n    setUiEquippedHat(normalizeItemId(eqHraw));\r\n    setUiEquippedNecklace(normalizeItemId(eqNraw));\r\n    setUiEquippedRing(normalizeItemId(eqRraw));\r\n\r\n    const invVal = (s as any).variablesState[\"inv\"];\r\n    const invIds = inkListToIds(invVal);\r\n\r\n    // Turn ids into display names for your sidebar list\r\n    setUiInventory(invIds.map(pretty));\r\n    calculateAndSetStats(s, eqWraw, eqAraw, eqOraw, eqHraw, eqNraw, eqRraw);\r\n  }\r\n\r\n  const ITEM_STATS: Record<string, { STR?: number; CHA?: number; WIT?: number }> = {\r\n    rusty_sword: { STR: 2 },\r\n    leather_armor: { STR: 4 },\r\n    old_sack: { CHA: -1 },\r\n  };\r\n\r\n  function calculateAndSetStats(\r\n    s: Story,\r\n    ...equippedRaw: string[]\r\n  ) {\r\n    const baseSTR = asNumber((s as any).variablesState[\"STR_BASE\"], 0);\r\n    const baseCHA = asNumber((s as any).variablesState[\"CHA_BASE\"], 0);\r\n    const baseWIT = asNumber((s as any).variablesState[\"WIT_BASE\"], 0);\r\n\r\n    let bonusSTR = 0;\r\n    let bonusCHA = 0;\r\n    let bonusWIT = 0;\r\n\r\n    equippedRaw.forEach(raw => {\r\n      const id = normalizeItemId(raw);\r\n      const stats = ITEM_STATS[id];\r\n      if (stats) {\r\n        bonusSTR += stats.STR ?? 0;\r\n        bonusCHA += stats.CHA ?? 0;\r\n        bonusWIT += stats.WIT ?? 0;\r\n      }\r\n    });\r\n\r\n    setUiStats({\r\n      STR: { base: baseSTR, total: baseSTR + bonusSTR },\r\n      CHA: { base: baseCHA, total: baseCHA + bonusCHA },\r\n      WIT: { base: baseWIT, total: baseWIT + bonusWIT },\r\n    });\r\n  }\r\n\r\n  const ITEM_NAMES: Record<string, string> = {\r\n    none: \"None\",\r\n    rusty_sword: \"Rusty Sword\",\r\n    leather_armor: \"Leather Armor\",\r\n    old_sack: \"Old Sack\",\r\n  };\r\n\r\n  function pretty(id: string) {\r\n    const norm = normalizeItemId(id);\r\n    return ITEM_NAMES[norm] ?? norm;\r\n  }\r\n\r\n  useEffect(() => {\r\n    // Load story.json once on page load.\r\n    (async () => {\r\n      const res = await fetch(\"/story.json\");\r\n      const json = await res.json();\r\n      setStoryJson(json);\r\n\r\n      // Update save presence after localStorage is available.\r\n      refreshSlotPresence();\r\n\r\n      // Optional: keep last active slot highlighted in the menu.\r\n      const raw = localStorage.getItem(ACTIVE_SLOT_KEY);\r\n      const n = raw ? parseInt(raw, 10) : 0;\r\n      if (Number.isFinite(n) && n >= 0 && n <= 2) setActiveSlot(n);\r\n    })();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const bottomRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    // Auto-scroll to bottom when lines or choices change\r\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [lines, choices]);\r\n\r\n  return (\r\n    <main style={{ maxWidth: 720, margin: \"40px auto\", padding: 16 }}>\r\n      {mode === \"menu\" && (\r\n        <div>\r\n          <h1 style={{ marginBottom: 8 }}>Text RPG</h1>\r\n          <p style={{ marginTop: 0, opacity: 0.8 }}>\r\n            Choose a save slot.\r\n          </p>\r\n\r\n          <div style={{ display: \"grid\", gap: 12, marginTop: 18 }}>\r\n            {[0, 1, 2].map(slot => (\r\n              <div\r\n                key={slot}\r\n                style={{\r\n                  border: \"1px solid rgba(255,255,255,0.15)\",\r\n                  borderRadius: 10,\r\n                  padding: 12,\r\n                  display: \"flex\",\r\n                  flexWrap: \"wrap\",\r\n                  gap: 10,\r\n                  alignItems: \"center\",\r\n                  justifyContent: \"space-between\",\r\n                }}\r\n              >\r\n                <div>\r\n                  <div style={{ fontWeight: 700 }}>\r\n                    Save {slot + 1} {slotHasSave[slot] ? \"\" : \"(empty)\"}\r\n                  </div>\r\n                  <div style={{ opacity: 0.8, fontSize: 14 }}>\r\n                    {slotHasSave[slot] ? \"Progress saved on this device.\" : \"Start a new run here.\"}\r\n                  </div>\r\n                </div>\r\n\r\n                <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\" }}>\r\n                  <button onClick={() => beginNewGame(slot)}>\r\n                    New Game\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={() => loadSlot(slot)}\r\n                    disabled={!slotHasSave[slot]}\r\n                  >\r\n                    Load\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={() => clearSlot(slot)}\r\n                    disabled={!slotHasSave[slot]}\r\n                  >\r\n                    Delete\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n\r\n          <div style={{ marginTop: 18, opacity: 0.75, fontSize: 13 }}>\r\n            Saves use localStorage, so they live per browser per device until deleted.\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {mode === \"stats\" && (\r\n        <div>\r\n          <h1 style={{ marginBottom: 8 }}>Create Character</h1>\r\n\r\n          <p style={{ marginTop: 0, opacity: 0.8 }}>\r\n            Distribute {STAT_POOL} points.\r\n          </p>\r\n\r\n          <StatEditor\r\n            stats={stats}\r\n            setStats={setStats}\r\n            pool={STAT_POOL}\r\n          />\r\n\r\n          <div style={{ display: \"flex\", gap: 10, marginTop: 16, flexWrap: \"wrap\" }}>\r\n            <button onClick={() => { setMode(\"menu\"); setPendingSlot(null); }}>\r\n              Back\r\n            </button>\r\n            <button onClick={confirmStats} disabled={stats.STR_BASE + stats.CHA_BASE + stats.WIT_BASE !== STAT_POOL}>\r\n              Confirm\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {mode === \"game\" && (\r\n        <div>\r\n          <div style={{ display: \"flex\", gap: 10, flexWrap: \"wrap\", marginBottom: 16 }}>\r\n            <button onClick={backToMenu}>Back to Menu</button>\r\n            <div style={{ opacity: 0.8, alignSelf: \"center\" }}>\r\n              Playing: Save {activeSlot + 1}\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{ display: \"flex\", gap: 16, alignItems: \"flex-start\" }}>\r\n            {/* Left: story */}\r\n            <div\r\n              style={{\r\n                flex: 1,\r\n                minWidth: 0,\r\n                height: \"60vh\", // Fixed height to allow scrolling\r\n                overflowY: \"auto\",\r\n                border: \"1px solid rgba(255,255,255,0.1)\",\r\n                borderRadius: 8,\r\n                padding: 16,\r\n                background: \"rgba(0,0,0,0.2)\",\r\n              }}\r\n            >\r\n              <div style={{ whiteSpace: \"pre-wrap\", lineHeight: 1.5 }}>\r\n                {lines.map((t, idx) => (\r\n                  <p key={idx} style={{ marginTop: 0, marginBottom: 16 }}>\r\n                    {t}\r\n                  </p>\r\n                ))}\r\n              </div>\r\n\r\n              <div style={{ display: \"grid\", gap: 10, marginTop: 18, paddingBottom: 20 }}>\r\n                {choices.map(c => (\r\n                  <button key={c.index} onClick={() => choose(c.index)}>\r\n                    {c.text}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n\r\n              <div ref={bottomRef} />\r\n            </div>\r\n\r\n            {/* Right: sidebar */}\r\n            <aside\r\n              style={{\r\n                width: 260,\r\n                border: \"1px solid rgba(255,255,255,0.15)\",\r\n                borderRadius: 10,\r\n                padding: 12,\r\n                position: \"sticky\",\r\n                top: 20,\r\n              }}\r\n            >\r\n              <div style={{ fontWeight: 800, marginBottom: 10 }}>Save {activeSlot + 1}</div>\r\n\r\n              <div style={{ marginBottom: 12 }}>\r\n                <div style={{ opacity: 0.75, fontSize: 13 }}>Coins</div>\r\n                <div style={{ fontSize: 18, fontWeight: 700 }}>{uiCoins}</div>\r\n              </div>\r\n\r\n              <div style={{ marginBottom: 16 }}>\r\n                <div style={{ opacity: 0.75, fontSize: 13, marginBottom: 6 }}>Stats</div>\r\n                {([\"STR\", \"CHA\", \"WIT\"] as const).map(stat => {\r\n                  const { base, total } = uiStats[stat];\r\n                  const diff = total - base;\r\n\r\n                  // specific color stops could be tweaked, but standard red->blue covers the range nicely\r\n                  const fillPercent = Math.min(100, Math.max(0, (total / 20) * 100));\r\n                  const basePercent = Math.min(100, Math.max(0, (base / 20) * 100));\r\n\r\n                  return (\r\n                    <div key={stat} style={{ display: \"flex\", alignItems: \"center\", fontSize: 13, marginBottom: 6 }}>\r\n                      <span style={{ fontWeight: 600, width: 32 }}>{stat}</span>\r\n\r\n                      {/* Bar Container */}\r\n                      <div style={{ flex: 1, height: 8, background: \"rgba(255,255,255,0.1)\", borderRadius: 4, marginRight: 8, marginLeft: 4, position: \"relative\", overflow: \"hidden\" }}>\r\n\r\n                        {/* Gradient Fill */}\r\n                        <div style={{\r\n                          width: `${fillPercent}%`,\r\n                          height: \"100%\",\r\n                          background: \"linear-gradient(90deg, #ff4d4d, #4d4dff)\",\r\n                          transition: \"width 0.3s ease\"\r\n                        }} />\r\n\r\n                        {/* Base Marker */}\r\n                        <div style={{\r\n                          position: \"absolute\",\r\n                          left: `${basePercent}%`,\r\n                          top: 0,\r\n                          bottom: 0,\r\n                          width: 2,\r\n                          background: \"rgba(255,255,255,0.8)\",\r\n                          boxShadow: \"0 0 2px rgba(0,0,0,0.5)\"\r\n                        }} />\r\n\r\n                      </div>\r\n\r\n                      <span style={{ width: 60, textAlign: \"right\", fontFamily: \"monospace\", whiteSpace: \"nowrap\", flexShrink: 0 }}>\r\n                        {total} <span style={{ opacity: 0.5, fontSize: 11 }}>({diff >= 0 ? \"+\" : \"\"}{diff})</span>\r\n                      </span>\r\n                    </div>\r\n                  );\r\n                })}\r\n              </div>\r\n\r\n              <div style={{ marginBottom: 24, position: \"relative\", height: 175 + (avatarY * 2), borderRadius: 12, overflow: \"visible\" }}>\r\n                {/* Body Silhouette - with mix-blend-mode to hide white bg */}\r\n                <div style={{\r\n                  position: \"absolute\",\r\n                  left: \"50%\",\r\n                  top: \"50%\",\r\n                  transform: \"translate(-50%, -50%)\",\r\n                  width: 200,\r\n                  height: 480,\r\n                  backgroundImage: 'url(\"/assets/body_silhouette.png\")',\r\n                  backgroundSize: \"contain\",\r\n                  backgroundRepeat: \"no-repeat\",\r\n                  backgroundPosition: \"center\",\r\n                  opacity: 0.6,\r\n                  mixBlendMode: \"multiply\",\r\n                  filter: \"invert(1)\",\r\n                  zIndex: 0\r\n                }} />\r\n\r\n                {/* Connector Lines SVG */}\r\n                <svg style={{ position: \"absolute\", top: 0, left: 0, width: \"100%\", height: \"100%\", pointerEvents: \"none\", opacity: 0.4, zIndex: 1 }}>\r\n                  {/* Left side: Hat -> Head */}\r\n                  <line x1={62} y1={24} x2={130} y2={15 + avatarY} stroke=\"white\" strokeWidth=\"1\" />\r\n                  {/* Left side: Outfit -> Finger L */}\r\n                  <line x1={62} y1={84} x2={110} y2={40 + avatarY} stroke=\"white\" strokeWidth=\"1\" />\r\n                  {/* Left side: Ring -> Torso */}\r\n                  <line x1={62} y1={144} x2={92} y2={90 + avatarY} stroke=\"white\" strokeWidth=\"1\" />\r\n                  {/* Right side: Necklace -> Hand R */}\r\n                  <line x1={200} y1={24} x2={130} y2={42 + avatarY} stroke=\"white\" strokeWidth=\"1\" />\r\n                  {/* Right side: Armor -> Chest */}\r\n                  <line x1={200} y1={84} x2={130} y2={55 + avatarY} stroke=\"white\" strokeWidth=\"1\" />\r\n                  {/* Right side: Sword -> Neck */}\r\n                  <line x1={200} y1={144} x2={167} y2={90 + avatarY} stroke=\"white\" strokeWidth=\"1\" />\r\n                </svg>\r\n\r\n                {/* Equipment Slots - Left: Hat, Ring, Outfit. Right: Weapon, Armor, Necklace */}\r\n                {(\r\n                  [\r\n                    { id: \"hat\", label: \"Hat\", icon: \"/assets/icon_hat.png\", x: 6, y: 0, slot: uiEquippedHat },\r\n                    { id: \"outfit\", label: \"Outfit\", icon: \"/assets/icon_outfit.png\", x: 6, y: 60, slot: uiEquippedOutfit },\r\n                    { id: \"ring\", label: \"Ring\", icon: null, x: 6, y: 120, slot: uiEquippedRing },\r\n                    { id: \"necklace\", label: \"Necklace\", icon: \"/assets/icon_necklace.png\", x: 200, y: 0, slot: uiEquippedNecklace },\r\n                    { id: \"armor\", label: \"Armor\", icon: \"/assets/icon_armor.png\", x: 200, y: 60, slot: uiEquippedArmor },\r\n                    { id: \"weapon\", label: \"Weapon\", icon: \"/assets/icon_weapon.png\", x: 200, y: 120, slot: uiEquippedWeapon },\r\n                  ] as const\r\n                ).map((item) => {\r\n                  const isEquipped = item.slot !== \"none\";\r\n                  const isRing = item.id === \"ring\";\r\n                  const displayName = isEquipped ? pretty(item.slot) : \"Empty\";\r\n\r\n                  return (\r\n                    <div\r\n                      key={item.id}\r\n                      className=\"equipment-slot\"\r\n                      style={{\r\n                        position: \"absolute\",\r\n                        left: item.x,\r\n                        top: item.y,\r\n                        width: 52,\r\n                        height: 52,\r\n                        background: \"transparent\",\r\n                        border: `2px solid ${isEquipped ? \"rgba(77,77,255,0.8)\" : \"rgba(255,255,255,0.2)\"}`,\r\n                        borderRadius: 10,\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                        cursor: \"pointer\",\r\n                        zIndex: 2,\r\n                        transition: \"border-color 0.3s ease, box-shadow 0.3s ease\",\r\n                        boxShadow: isEquipped ? \"0 0 8px rgba(77,77,255,0.4)\" : \"none\"\r\n                      }}\r\n                    >\r\n                      {/* Custom Tooltip */}\r\n                      <span\r\n                        className=\"slot-tooltip\"\r\n                        style={{\r\n                          position: \"absolute\",\r\n                          bottom: \"calc(100% + 8px)\",\r\n                          left: \"50%\",\r\n                          transform: \"translateX(-50%)\",\r\n                          background: \"rgba(30,30,40,0.95)\",\r\n                          color: isEquipped ? \"#fff\" : \"#888\",\r\n                          padding: \"6px 10px\",\r\n                          borderRadius: 6,\r\n                          fontSize: 12,\r\n                          fontWeight: 500,\r\n                          whiteSpace: \"nowrap\",\r\n                          opacity: 0,\r\n                          pointerEvents: \"none\",\r\n                          transition: \"opacity 0.15s ease\",\r\n                          border: \"1px solid rgba(255,255,255,0.1)\",\r\n                          zIndex: 10\r\n                        }}\r\n                      >\r\n                        {displayName}\r\n                      </span>\r\n\r\n                      {/* Icon with gradient fill animation */}\r\n                      <div style={{\r\n                        width: \"100%\",\r\n                        height: \"100%\",\r\n                        position: \"relative\",\r\n                        overflow: \"hidden\",\r\n                        borderRadius: 8\r\n                      }}>\r\n                        {/* Empty State Icon (always rendered, fades out when equipped) */}\r\n                        {!isRing && (\r\n                          <img\r\n                            src={item.icon!}\r\n                            alt={item.id}\r\n                            style={{\r\n                              position: \"absolute\",\r\n                              top: \"10%\",\r\n                              left: \"10%\",\r\n                              width: \"80%\",\r\n                              height: \"80%\",\r\n                              objectFit: \"contain\",\r\n                              opacity: 0.3,\r\n                              filter: \"invert(1)\"\r\n                            }}\r\n                          />\r\n                        )}\r\n                        {isRing && !isEquipped && (\r\n                          <div style={{\r\n                            position: \"absolute\",\r\n                            top: \"50%\",\r\n                            left: \"50%\",\r\n                            transform: \"translate(-50%, -50%)\",\r\n                            width: 20,\r\n                            height: 20,\r\n                            border: \"3px solid rgba(255,255,255,0.25)\",\r\n                            borderRadius: \"50%\"\r\n                          }} />\r\n                        )}\r\n\r\n                        {/* Equipped State: Gradient-filled icon */}\r\n                        <div style={{\r\n                          position: \"absolute\",\r\n                          top: 0,\r\n                          left: 0,\r\n                          width: \"100%\",\r\n                          height: \"100%\",\r\n                          background: \"linear-gradient(180deg, #ff4d4d, #4d4dff)\",\r\n                          maskImage: isRing\r\n                            ? \"radial-gradient(transparent 38%, black 42%, black 58%, transparent 62%)\"\r\n                            : `url(${item.icon})`,\r\n                          WebkitMaskImage: isRing\r\n                            ? \"radial-gradient(transparent 38%, black 42%, black 58%, transparent 62%)\"\r\n                            : `url(${item.icon})`,\r\n                          maskSize: \"80%\",\r\n                          WebkitMaskSize: \"80%\",\r\n                          maskRepeat: \"no-repeat\",\r\n                          WebkitMaskRepeat: \"no-repeat\",\r\n                          maskPosition: \"center\",\r\n                          WebkitMaskPosition: \"center\",\r\n                          clipPath: isEquipped ? \"inset(0 0 0 0)\" : \"inset(100% 0 0 0)\",\r\n                          transition: \"clip-path 0.3s ease\"\r\n                        }} />\r\n                      </div>\r\n                    </div>\r\n                  );\r\n                })}\r\n\r\n                {/* CSS for hover tooltips */}\r\n                <style>{`\r\n                  .equipment-slot:hover .slot-tooltip {\r\n                    opacity: 1 !important;\r\n                  }\r\n                  .equipment-slot:hover {\r\n                    border-color: rgba(255,255,255,0.5) !important;\r\n                  }\r\n                `}</style>\r\n              </div>\r\n\r\n              <div>\r\n                <div style={{ opacity: 0.75, fontSize: 13, marginBottom: 6 }}>Inventory</div>\r\n                {uiInventory.length === 0 ? (\r\n                  <div style={{ opacity: 0.7, fontSize: 14 }}>Empty</div>\r\n                ) : (\r\n                  <ul style={{ margin: 0, paddingLeft: 18 }}>\r\n                    {uiInventory.map(item => (\r\n                      <li key={item}>{item}</li>\r\n                    ))}\r\n                  </ul>\r\n                )}\r\n              </div>\r\n            </aside>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}